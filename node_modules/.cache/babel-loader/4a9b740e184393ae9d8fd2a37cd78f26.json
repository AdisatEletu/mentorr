{"ast":null,"code":"var _jsxFileName = \"/Users/softcom/Documents/mentorr/mentorr/mentorr/src/App.js\";\nimport React from \"react\";\nimport { Provider } from \"react-redux\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport store from \"./redux/store\";\nimport { setCurrentUser, logoutUser } from \"./redux/actions/authActions\";\nimport Routes from \"./config/Routes\";\n\nif (localStorage.jwt) {\n  //set auth token header auth;\n  axios.defaults.headers.common[\"Authorization\"] = store.getState().auth.user.token;\n  axios.defaults.headers.common[\"Authorization\"] = localStorage.jwt; //decode token and get user\n\n  const decoded = jwt_decode(localStorage.jwt); //set current user\n  //sets persistent session\n\n  if (localStorage.user) store.dispatch(setCurrentUser(JSON.parse(localStorage.user))); // check for expired token\n\n  const currentTime = Date.now() / 1000;\n\n  if (decoded.exp < currentTime) {\n    store.dispatch(logoutUser()); // window.location.href = \"/\";\n  }\n}\n\nfunction App() {\n  return React.createElement(Provider, {\n    store: store,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(Routes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/softcom/Documents/mentorr/mentorr/mentorr/src/App.js"],"names":["React","Provider","axios","jwt_decode","store","setCurrentUser","logoutUser","Routes","localStorage","jwt","defaults","headers","common","getState","auth","user","token","decoded","dispatch","JSON","parse","currentTime","Date","now","exp","App"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,SAASC,cAAT,EAAyBC,UAAzB,QAA2C,6BAA3C;AACA,OAAOC,MAAP,MAAmB,iBAAnB;;AAEA,IAAIC,YAAY,CAACC,GAAjB,EAAsB;AACpB;AACAP,EAAAA,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CACE,eADF,IAEIR,KAAK,CAACS,QAAN,GAAiBC,IAAjB,CAAsBC,IAAtB,CAA2BC,KAF/B;AAIAd,EAAAA,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDJ,YAAY,CAACC,GAA9D,CANoB,CAOpB;;AACA,QAAMQ,OAAO,GAAGd,UAAU,CAACK,YAAY,CAACC,GAAd,CAA1B,CARoB,CASpB;AACA;;AACA,MAAID,YAAY,CAACO,IAAjB,EACEX,KAAK,CAACc,QAAN,CAAeb,cAAc,CAACc,IAAI,CAACC,KAAL,CAAWZ,YAAY,CAACO,IAAxB,CAAD,CAA7B,EAZkB,CAcpB;;AACA,QAAMM,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAAjC;;AACA,MAAIN,OAAO,CAACO,GAAR,GAAcH,WAAlB,EAA+B;AAC7BjB,IAAAA,KAAK,CAACc,QAAN,CAAeZ,UAAU,EAAzB,EAD6B,CAE7B;AACD;AACF;;AAED,SAASmB,GAAT,GAAe;AACb,SACE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAErB,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AAED,eAAeqB,GAAf","sourcesContent":["import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport store from \"./redux/store\";\nimport { setCurrentUser, logoutUser } from \"./redux/actions/authActions\";\nimport Routes from \"./config/Routes\";\n\nif (localStorage.jwt) {\n  //set auth token header auth;\n  axios.defaults.headers.common[\n    \"Authorization\"\n  ] = store.getState().auth.user.token;\n\n  axios.defaults.headers.common[\"Authorization\"] = localStorage.jwt;\n  //decode token and get user\n  const decoded = jwt_decode(localStorage.jwt);\n  //set current user\n  //sets persistent session\n  if (localStorage.user)\n    store.dispatch(setCurrentUser(JSON.parse(localStorage.user)));\n\n  // check for expired token\n  const currentTime = Date.now() / 1000;\n  if (decoded.exp < currentTime) {\n    store.dispatch(logoutUser());\n    // window.location.href = \"/\";\n  }\n}\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Routes />\n    </Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}